<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <title>S…ôb…ôt</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="icon" href="images/fevicon.png" type="image/gif" />
    <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" media="screen">
    <style>
        /* General styles */
.modal { 
    display: none; 
    position: fixed; 
    z-index: 1; 
    left: 0; 
    top: 0; 
    width: 100%; 
    height: 100%; 
    overflow: auto; 
    background-color: rgba(0, 0, 0, 0.4); 
}

.modal-content { 
    background-color: #fefefe; 
    margin: 15% auto; 
    padding: 20px; 
    border: 1px solid #888; 
    width: 80%; 
    border-radius: 10px; /* Rounded corners for modal */
}

.close { 
    color: #aaa; 
    float: right; 
    font-size: 28px; 
    font-weight: bold; 
}

.close:hover { 
    color: black; 
    text-decoration: none; 
    cursor: pointer; 
}

/* Cart Item Styles */
.cart-item { 
    display: flex; 
    align-items: center; 
    margin-bottom: 20px; 
    padding: 10px; 
    border: 1px solid #ddd; 
    border-radius: 10px; /* Rounded corners for cart item */
    background-color: #f9f9f9;
}

.cart-item img { 
    width: 50px; 
    height: 50px; 
    margin-right: 15px; 
    border-radius: 5px; /* Rounded image corners */
}

.cart-item-details { 
    flex: 1; 
    padding-right: 15px; /* Added spacing for better layout */
}

/* Quantity Buttons */
.quantity-btn { 
    font-size: 18px; 
    background-color: #ddd; 
    border: none; 
    padding: 5px; 
    cursor: pointer; 
    width: 30px; 
    height: 30px; 
    text-align: center; 
    border-radius: 5px; /* Rounded buttons */
}

.quantity-btn:hover { 
    background-color: #bbb; 
}

.quantity-input { 
    width: 40px; 
    text-align: center; 
    font-size: 16px; 
    border: 1px solid #ddd; 
    padding: 5px; 
    border-radius: 5px; /* Rounded input field */
}

/* Total Price */
.cart-total { 
    margin-top: 20px; 
    font-size: 20px; 
    font-weight: bold; 
}

/* Action Buttons */
.green-btn { 
    background-color: #28a745; 
    font-size: 18px; 
    color: white; 
    border: none; 
    padding: 10px 25px; 
    cursor: pointer; 
    border-radius: 5px; 
    font-weight: bold; 
}

.green-btn:hover { 
    opacity: 0.8; 
}

.back-btn { 
    font-size: 16px; 
    padding: 10px 20px; 
    background-color: #4CAF50; 
    color: white; 
    border: none; 
    border-radius: 5px; 
    cursor: pointer; 
}

.back-btn:hover { 
    opacity: 0.8; 
}

/* Responsive Adjustments */
@media (max-width: 767px) {
    /* Modal */
    .modal-content { 
        width: 90%; 
        padding: 15px; 
        border-radius: 10px; 
    }

    /* Cart Item */
    .cart-item { 
        flex-direction: column; 
        align-items: flex-start; 
        padding: 15px; 
        margin-bottom: 15px; 
        border-radius: 10px; 
    }

    .cart-item img { 
        width: 40px; 
        height: 40px; 
    }

    /* Quantity Buttons */
    .quantity-btn { 
        width: 25px; 
        height: 25px; 
        font-size: 16px; 
        border-radius: 5px; 
    }

    .quantity-input { 
        width: 30px; 
        font-size: 14px; 
    }

    /* Button styling on mobile */
    .green-btn { 
        padding: 10px 20px; 
        font-size: 14px; 
        width: auto; 
        display: inline-block; 
        margin: 5px 0; 
        border-radius: 5px; 
    }

    .back-btn { 
        font-size: 14px; 
        padding: 8px 15px; 
        width: auto; 
        margin: 5px 0;
    }
}

    </style>
</head>
<body class="main-layout product_page">
<!-- loader -->
<div class="loader_bg">
    <div class="loader"><img src="images/loading.gif" alt="#" /></div>
</div>
<header>
    <div class="header">
        <div class="head_top">
            <div class="container">
                <div class="row">
                    <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12">
                        <div class="top-box">
                            <ul class="sociel_link">
                                <li> <a href="https://www.instagram.com/amperelektron_baku/"><i class="fa fa-instagram"></i></a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12">
                        <div class="top-box">
                            <p>Amper Elektron</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col logo_section">
                <div class="full">
                    <div class="center-desk">
                        <div class="logo"> <a href="index.html"><img src="images/logoo.jpg" alt="logo"/></a> </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-7 col-lg-7 col-md-9 col-sm-9">
                <div class="menu-area">
                    <div class="limit-box">
                        <nav class="main-menu">
                            <ul class="menu-area-main">
                                <li> <a href="index.html">∆èsas</a> </li>
                                <li> <a href="about.html">Haqqƒ±mƒ±zda</a> </li>
                                <li> <a href="product.html">M…ôhsullar</a></li>
                                <li class="active"> <a href="sebet.html">S…ôb…ôt</a> </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
            <div class="col-xl-2 col-lg-2 col-md-2 col-sm-2"></div>
        </div>
    </div>
</header>
<!-- end header -->
<div class="brand_color">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="titlepage">
                    <h2>Se√ßdiyiniz M…ôhsullar</h2>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Cart Table -->
<div class="product">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div id="cartItems"></div>
                <p id="totalPrice" class="cart-total">C…ômi: 0‚Çº</p>
                <button onclick="clearCart()" class="green-btn">S…ôb…ôti T…ômizl…ô</button>
                <button onclick="openModal()" class="green-btn">S…ôb…ôti T…ôsdiql…ô</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal for User Info -->
<div id="myModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <h3>S…ôb…ôti T…ôsdiql…ô</h3>
        <form id="orderForm" action="https://formsubmit.co/5517a9bd39f42ffb03a27ac54fa047e8" method="POST" onsubmit="submitOrder(event)">
            <input type="text" name="Ad" placeholder="Ad" required><br><br>
            <input type="text" name="Soyad" placeholder="Soyad" required><br><br>
            <input type="text" name="Mobil N√∂mr…ô" placeholder="Mobil N√∂mr…ô" required><br><br>
            <textarea name="cartDetails" style="display:none;"></textarea>
            <textarea name="totalPrice" style="display:none;"></textarea>
            <!-- Hidden fields for Formsubmit -->
            <input type="hidden" name="_next" value="thank-you.html"> <!-- Add your thank-you page URL -->
            <input type="hidden" name="_subject" value="Yeni Sifari≈ü Alƒ±ndƒ±"> <!-- Customize the email subject -->
            <input type="submit" value="G√∂nd…ôr" class="green-btn">
        </form>
    </div>
</div>

<!-- footer -->
<footer>
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-6 offset-md-3">
                    <ul class="sociel">
                    </ul>
                </div>
            </div>
            <div class="row">
                <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12">
                    <div class="contact">
                        <h3>∆èlaq…ô M…ôlumatlarƒ±</h3>
                        <ul class="lik">
                            <li> <a href="#">üìû +994 55 698 37 41</a></li>
                            <li> <a href="#">üìû +994 70 800 34 76</a></li>
                            <li> <a href="#">amperelektron_baku</a></li>
                            <li> <a href="#">B…ôxtiyar Vahazad…ô 32C</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="copyright">
                <p>2025 B√ºt√ºn h√ºquqlar qorunur.</p>
            </div>
        </div>
    </div>
</footer>
<!-- end footer -->
<script src="js/jquery.min.js"></script>
<script src="js/popper.min.js"></script>
<script src="js/bootstrap.bundle.min.js"></script>
<script src="js/jquery-3.0.0.min.js"></script>
<script src="js/plugin.js"></script>
<script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="js/custom.js"></script>

<script>
    let cart = JSON.parse(localStorage.getItem('cart')) || [];

    // Function to render cart and update total price
    function renderCart() {
        const cartItemsDiv = document.getElementById('cartItems');
        const totalPriceElement = document.getElementById('totalPrice');
        let totalPrice = 0;

        if (cart.length === 0) {
            cartItemsDiv.innerHTML = "<p>S…ôb…ôtiniz bo≈üdur</p>";
            totalPriceElement.textContent = 'C…ômi: 0‚Çº';
        } else {
            cartItemsDiv.innerHTML = cart.map((item, index) => {
                totalPrice += item.price * item.quantity;
                return `
                    <div class="cart-item">
                        <img src="icon/${item.name}.png" alt="${item.name}">
                        <div class="cart-item-details">
                            <h4>${item.name}</h4>
                            <p>Sayƒ±: ${item.quantity}</p>
                            <p>Qiym…ôt: ${item.price}‚Çº</p>
                        </div>
                        <div class="quantity-controls">
                            <button class="quantity-btn" onclick="updateQuantity(${index}, 'decrease')">-</button>
                            <input type="text" class="quantity-input" value="${item.quantity}" readonly>
                            <button class="quantity-btn" onclick="updateQuantity(${index}, 'increase')">+</button>
                        </div>
                        <button class="back-btn" onclick="removeItem(${index})">Sil</button>
                    </div>
                `;
            }).join('');
            totalPriceElement.textContent = `C…ômi: ${totalPrice.toFixed(2)}‚Çº`;
        }
    }

    // Update item quantity
    function updateQuantity(index, action) {
        if (action === 'increase') {
            cart[index].quantity++;
        } else if (action === 'decrease' && cart[index].quantity > 1) {
            cart[index].quantity--;
        }
        updateLocalStorage();
        renderCart();
    }

    // Remove item from cart
    function removeItem(index) {
        cart.splice(index, 1);
        updateLocalStorage();
        renderCart();
    }

    // Update the localStorage and avoid unnecessary reflows
    function updateLocalStorage() {
        localStorage.setItem('cart', JSON.stringify(cart));
    }

    // Open modal
    function openModal() {
        document.getElementById('myModal').style.display = "block";
    }

    // Close modal
    function closeModal() {
        document.getElementById('myModal').style.display = "none";
    }

    // Submit the order and clear cart
    function submitOrder(event) {
        event.preventDefault();

        let cartDetails = cart.map(item => `${item.name}: ${item.quantity} …ôd…ôd x ${item.price}‚Çº`).join("\n");
        let totalPrice = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);

        document.querySelector('textarea[name="cartDetails"]').value = cartDetails;
        document.querySelector('textarea[name="totalPrice"]').value = totalPrice;

        // Submit the form
        event.target.submit();
        window.location.href = "thank-you.html";  // This line redirects after form submission
        // Clear the cart from localStorage after submission
        cart = [];
        updateLocalStorage();
        renderCart();
    }

    // Clear the cart
    function clearCart() {
        cart = [];
        updateLocalStorage();
        renderCart();
        alert("S…ôb…ôt t…ômizl…ôndi!");
    }

    // Initial load
    window.onload = renderCart;
</script>

</body>
</html>
